# Copyright (C) 2019 SAP SE or an SAP affiliate company. All rights reserved.
# This file is licensed under the Apache Software License, v. 2 except as
# noted otherwise in the LICENSE file.
#
# Licensed under the Apache License, Version 2.0 (the "License");
# you may not use this file except in compliance with the License.

apiVersion: {{ .Values.securityPolicy.apiVersion }}
kind: CustomResourceDefinition
metadata:
  name: karydiasecuritypolicies.{{ .Values.metadata.apiGroup }}
spec:
  group: {{ .Values.metadata.apiGroup }}
  version: {{ .Values.securityPolicy.version }}
  scope: Cluster
  names:
    kind: KarydiaSecurityPolicy
    plural: karydiasecuritypolicies
    shortNames:
      - ksp
  validation:
    openAPIV3Schema:
      properties:
        spec:
          properties:
            pod:
              properties:
                automountServiceAccountToken:
                  type: string
                seccompProfile:
                  type: string
